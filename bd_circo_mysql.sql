-- MySQL Script generated by MySQL Workbench
-- lun 23 mar 2020 00:38:23 CET
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema CIRCO
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `CIRCO` ;

-- -----------------------------------------------------
-- Schema CIRCO
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `CIRCO` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_spanish2_ci ;
USE `CIRCO` ;

-- -----------------------------------------------------
-- Table `CIRCO`.`ATRACCIONES`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CIRCO`.`ATRACCIONES` ;

CREATE TABLE IF NOT EXISTS `CIRCO`.`ATRACCIONES` (
  `nombre` VARCHAR(50) NOT NULL,
  `fecha_inicio` DATE NULL,
  `ganancias` DECIMAL(8,2) NULL,
  PRIMARY KEY (`nombre`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CIRCO`.`ARTISTAS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CIRCO`.`ARTISTAS` ;

CREATE TABLE IF NOT EXISTS `CIRCO`.`ARTISTAS` (
  `nif` CHAR(9) NOT NULL,
  `apellidos` VARCHAR(100) NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `nif_jefe` CHAR(9) NULL,
  PRIMARY KEY (`nif`),
  INDEX `fk_ARTISTAS_JEFEARTISTAS_idx` (`nif_jefe` ASC) VISIBLE,
  CONSTRAINT `fk_ARTISTAS_JEFEARTISTAS`
    FOREIGN KEY (`nif_jefe`)
    REFERENCES `CIRCO`.`ARTISTAS` (`nif`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CIRCO`.`ATRACCIONES_ARTISTAS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CIRCO`.`ATRACCIONES_ARTISTAS` ;

CREATE TABLE IF NOT EXISTS `CIRCO`.`ATRACCIONES_ARTISTAS` (
  `nombre_atraccion` VARCHAR(50) NOT NULL,
  `nif_artista` CHAR(9) NOT NULL,
  `fecha_inicio` DATE NOT NULL DEFAULT (curdate()),
  `fecha_fin` DATE NULL,
  PRIMARY KEY (`nombre_atraccion`, `nif_artista`, `fecha_inicio`),
  INDEX `fk_ATRACCIONES_has_ARTISTAS_ARTISTAS1_idx` (`nif_artista` ASC) VISIBLE,
  INDEX `fk_ATRACCIONES_has_ARTISTAS_ATRACCIONES1_idx` (`nombre_atraccion` ASC) VISIBLE,
  CONSTRAINT `fk_ATRACCIONES_has_ARTISTAS_ATRACCIONES1`
    FOREIGN KEY (`nombre_atraccion`)
    REFERENCES `CIRCO`.`ATRACCIONES` (`nombre`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE,
  CONSTRAINT `fk_ATRACCIONES_has_ARTISTAS_ARTISTAS1`
    FOREIGN KEY (`nif_artista`)
    REFERENCES `CIRCO`.`ARTISTAS` (`nif`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CIRCO`.`ATRACCION_DIA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CIRCO`.`ATRACCION_DIA` ;

CREATE TABLE IF NOT EXISTS `CIRCO`.`ATRACCION_DIA` (
  `nombre_atraccion` VARCHAR(50) NOT NULL,
  `fecha_` DATE NOT NULL,
  `num_espectadores` SMALLINT UNSIGNED NULL,
  `ganancias` DECIMAL(7,2) NULL,
  PRIMARY KEY (`nombre_atraccion`, `fecha_`),
  CONSTRAINT `fk_ATRACCIONDIA_ATRACC`
    FOREIGN KEY (`nombre_atraccion`)
    REFERENCES `CIRCO`.`ATRACCIONES` (`nombre`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CIRCO`.`PISTAS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CIRCO`.`PISTAS` ;

CREATE TABLE IF NOT EXISTS `CIRCO`.`PISTAS` (
  `nombre` VARCHAR(50) NOT NULL,
  `aforo` SMALLINT NOT NULL,
  PRIMARY KEY (`nombre`),
  UNIQUE INDEX `aforo_UNIQUE` (`aforo` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CIRCO`.`ANIMALES`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CIRCO`.`ANIMALES` ;

CREATE TABLE IF NOT EXISTS `CIRCO`.`ANIMALES` (
  `nombre` VARCHAR(50) NOT NULL,
  `tipo` VARCHAR(9) NOT NULL,
  `anhos` TINYINT UNSIGNED NULL,
  `peso` FLOAT NULL,
  `estatura` FLOAT NULL,
  `nombre_atraccion` VARCHAR(50) NOT NULL,
  `nombre_pista` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`nombre`),
  INDEX `fk_ANIMALES_ATRACCIONES1_idx` (`nombre_atraccion` ASC) VISIBLE,
  INDEX `fk_ANIMALES_PISTAS1_idx` (`nombre_pista` ASC) VISIBLE,
  CONSTRAINT `fk_ANIMALES_ATRACCIONES1`
    FOREIGN KEY (`nombre_atraccion`)
    REFERENCES `CIRCO`.`ATRACCIONES` (`nombre`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE,
  CONSTRAINT `fk_ANIMALES_PISTAS1`
    FOREIGN KEY (`nombre_pista`)
    REFERENCES `CIRCO`.`PISTAS` (`nombre`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `CIRCO`.`ANIMALES_ARTISTAS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `CIRCO`.`ANIMALES_ARTISTAS` ;

CREATE TABLE IF NOT EXISTS `CIRCO`.`ANIMALES_ARTISTAS` (
  `nombre_animal` VARCHAR(50) NOT NULL,
  `nif_artista` CHAR(9) NOT NULL,
  PRIMARY KEY (`nombre_animal`, `nif_artista`),
  INDEX `fk_ANIMALES_has_ARTISTAS_ARTISTAS1_idx` (`nif_artista` ASC) VISIBLE,
  INDEX `fk_ANIMALES_has_ARTISTAS_ANIMALES1_idx` (`nombre_animal` ASC) VISIBLE,
  CONSTRAINT `fk_ANIMALES_has_ARTISTAS_ANIMALES1`
    FOREIGN KEY (`nombre_animal`)
    REFERENCES `CIRCO`.`ANIMALES` (`nombre`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE,
  CONSTRAINT `fk_ANIMALES_has_ARTISTAS_ARTISTAS1`
    FOREIGN KEY (`nif_artista`)
    REFERENCES `CIRCO`.`ARTISTAS` (`nif`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `CIRCO`.`ATRACCIONES`
-- -----------------------------------------------------
START TRANSACTION;
USE `CIRCO`;
INSERT INTO `CIRCO`.`ATRACCIONES` (`nombre`, `fecha_inicio`, `ganancias`) VALUES ('El gran felino', '1999/11/01', 61121);
INSERT INTO `CIRCO`.`ATRACCIONES` (`nombre`, `fecha_inicio`, `ganancias`) VALUES ('Las jirafas', '2000/04/01', 44030);
INSERT INTO `CIRCO`.`ATRACCIONES` (`nombre`, `fecha_inicio`, `ganancias`) VALUES ('El devorador', '2001/04/01', 43012);
INSERT INTO `CIRCO`.`ATRACCIONES` (`nombre`, `fecha_inicio`, `ganancias`) VALUES ('El orangután', NULL, NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `CIRCO`.`ARTISTAS`
-- -----------------------------------------------------
START TRANSACTION;
USE `CIRCO`;
INSERT INTO `CIRCO`.`ARTISTAS` (`nif`, `apellidos`, `nombre`, `nif_jefe`) VALUES ('22222222B', 'Sanchez', 'Luis', NULL);
INSERT INTO `CIRCO`.`ARTISTAS` (`nif`, `apellidos`, `nombre`, `nif_jefe`) VALUES ('11111111A', 'Lopez', 'Juan', '22222222B');
INSERT INTO `CIRCO`.`ARTISTAS` (`nif`, `apellidos`, `nombre`, `nif_jefe`) VALUES ('33333333C', 'Perez', 'Carlos', '22222222B');

COMMIT;


-- -----------------------------------------------------
-- Data for table `CIRCO`.`ATRACCIONES_ARTISTAS`
-- -----------------------------------------------------
START TRANSACTION;
USE `CIRCO`;
INSERT INTO `CIRCO`.`ATRACCIONES_ARTISTAS` (`nombre_atraccion`, `nif_artista`, `fecha_inicio`, `fecha_fin`) VALUES ('El gran felino', '11111111A', '2000/01/01', '2000/03/01');
INSERT INTO `CIRCO`.`ATRACCIONES_ARTISTAS` (`nombre_atraccion`, `nif_artista`, `fecha_inicio`, `fecha_fin`) VALUES ('Las jirafas', '11111111A', '2000/04/01', NULL);
INSERT INTO `CIRCO`.`ATRACCIONES_ARTISTAS` (`nombre_atraccion`, `nif_artista`, `fecha_inicio`, `fecha_fin`) VALUES ('El gran felino', '22222222B', '1999/01/11', NULL);
INSERT INTO `CIRCO`.`ATRACCIONES_ARTISTAS` (`nombre_atraccion`, `nif_artista`, `fecha_inicio`, `fecha_fin`) VALUES ('El devorador', '33333333C', '2001/04/01', NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `CIRCO`.`ATRACCION_DIA`
-- -----------------------------------------------------
START TRANSACTION;
USE `CIRCO`;
INSERT INTO `CIRCO`.`ATRACCION_DIA` (`nombre_atraccion`, `fecha_`, `num_espectadores`, `ganancias`) VALUES ('El gran felino', '1999/11/01', 100, 11121);
INSERT INTO `CIRCO`.`ATRACCION_DIA` (`nombre_atraccion`, `fecha_`, `num_espectadores`, `ganancias`) VALUES ('El gran felino', '2000/01/01', 230, 20000);
INSERT INTO `CIRCO`.`ATRACCION_DIA` (`nombre_atraccion`, `fecha_`, `num_espectadores`, `ganancias`) VALUES ('El gran felino', '2000/04/01', 330, 30000);
INSERT INTO `CIRCO`.`ATRACCION_DIA` (`nombre_atraccion`, `fecha_`, `num_espectadores`, `ganancias`) VALUES ('Las jirafas', '2000/04/01', 110, 14030);
INSERT INTO `CIRCO`.`ATRACCION_DIA` (`nombre_atraccion`, `fecha_`, `num_espectadores`, `ganancias`) VALUES ('Las jirafas', '2000/08/01', 323, 30000);
INSERT INTO `CIRCO`.`ATRACCION_DIA` (`nombre_atraccion`, `fecha_`, `num_espectadores`, `ganancias`) VALUES ('El devorador', '2001/04/01', 400, 43012);

COMMIT;


-- -----------------------------------------------------
-- Data for table `CIRCO`.`PISTAS`
-- -----------------------------------------------------
START TRANSACTION;
USE `CIRCO`;
INSERT INTO `CIRCO`.`PISTAS` (`nombre`, `aforo`) VALUES ('CENTRAL', 1000);
INSERT INTO `CIRCO`.`PISTAS` (`nombre`, `aforo`) VALUES ('LATERAL1', 300);
INSERT INTO `CIRCO`.`PISTAS` (`nombre`, `aforo`) VALUES ('LATERAL2', 400);

COMMIT;


-- -----------------------------------------------------
-- Data for table `CIRCO`.`ANIMALES`
-- -----------------------------------------------------
START TRANSACTION;
USE `CIRCO`;
INSERT INTO `CIRCO`.`ANIMALES` (`nombre`, `tipo`, `anhos`, `peso`, `estatura`, `nombre_atraccion`, `nombre_pista`) VALUES ('Leo', 'León', 3, 120, 1.10, 'El gran felino', 'CENTRAL');
INSERT INTO `CIRCO`.`ANIMALES` (`nombre`, `tipo`, `anhos`, `peso`, `estatura`, `nombre_atraccion`, `nombre_pista`) VALUES ('Princesa1', 'Jirafa', 2, 100, 2.20, 'Las jirafas', 'LATERAL1');
INSERT INTO `CIRCO`.`ANIMALES` (`nombre`, `tipo`, `anhos`, `peso`, `estatura`, `nombre_atraccion`, `nombre_pista`) VALUES ('Princesa2', 'Jirafa', 3, 110, 2.30, 'Las jirafas', 'LATERAL1');
INSERT INTO `CIRCO`.`ANIMALES` (`nombre`, `tipo`, `anhos`, `peso`, `estatura`, `nombre_atraccion`, `nombre_pista`) VALUES ('Caiman', 'Cocodrilo', 1, 70, 1.10, 'El devorador', 'LATERAL2');

COMMIT;


-- -----------------------------------------------------
-- Data for table `CIRCO`.`ANIMALES_ARTISTAS`
-- -----------------------------------------------------
START TRANSACTION;
USE `CIRCO`;
INSERT INTO `CIRCO`.`ANIMALES_ARTISTAS` (`nombre_animal`, `nif_artista`) VALUES ('Caiman', '11111111A');
INSERT INTO `CIRCO`.`ANIMALES_ARTISTAS` (`nombre_animal`, `nif_artista`) VALUES ('Leo', '11111111A');
INSERT INTO `CIRCO`.`ANIMALES_ARTISTAS` (`nombre_animal`, `nif_artista`) VALUES ('Princesa1', '11111111A');
INSERT INTO `CIRCO`.`ANIMALES_ARTISTAS` (`nombre_animal`, `nif_artista`) VALUES ('Princesa2', '22222222B');
INSERT INTO `CIRCO`.`ANIMALES_ARTISTAS` (`nombre_animal`, `nif_artista`) VALUES ('Caiman', '22222222B');

COMMIT;

